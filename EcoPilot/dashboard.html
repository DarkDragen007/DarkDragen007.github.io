<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EcoPilot Dashboard - Live-√úberwachung & Energieoptimierung</title>
    <style>
        :root{
            --primary: #10b981;
            --secondary: #0891b2;
            --accent: #f59e0b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg:#ffffff;
            --card-bg:#ffffff;
            --text:#374151;
            --muted-text:#6b7280;
            --border:#e5e7eb;
            --card-shadow:0 4px 12px rgba(0,0,0,0.06);
            --heading:#0f172a;
            --light-bg:#f3f4f6;
        }
        [data-theme="dark"]{
            --primary:#34d399;
            --secondary:#06b6d4;
            --accent:#fbbf24;
            --success:#10b981;
            --warning:#fbbf24;
            --danger:#f87171;
            --bg:#071127;
            --card-bg:#081632;
            --text:#e6fdf0;
            --muted-text:#9ca3af;
            --border:rgba(255,255,255,0.06);
            --card-shadow:0 6px 18px rgba(0,0,0,0.6);
            --heading:#e6fdf0;
            --light-bg:#0f172a;
        }
        *{margin:0; padding:0; box-sizing:border-box;}
        body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif; background:var(--bg); color:var(--text); transition:background 200ms, color 200ms;}
        
        /* Header */
        .header{display:flex; justify-content:space-between; align-items:center; padding:1.2rem 2rem; background:var(--card-bg); border-bottom:1px solid var(--border); box-shadow:var(--card-shadow); position:sticky; top:0; z-index:50;}
        .brand{display:flex; align-items:center; gap:0.8rem; font-size:1.3rem; font-weight:700; color:var(--primary);}
        .brand img{height:40px;}
        .header-actions{display:flex; align-items:center; gap:1rem;}
        .badge{display:inline-flex; align-items:center; gap:0.4rem; padding:0.35rem 0.8rem; border-radius:20px; font-size:0.85rem; font-weight:600;}
        .badge.live{background:rgba(16,185,129,0.15); color:var(--primary);}
        .badge.live::before{content:''; width:8px; height:8px; background:var(--primary); border-radius:50%; animation:pulse 2s infinite;}
        @keyframes pulse{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}
        
        /* Theme toggle */
        .theme-toggle{width:40px; height:24px; padding:3px; border-radius:999px; background:var(--muted-text); border:1px solid var(--border); display:inline-flex; align-items:center; justify-content:flex-start; cursor:pointer; transition:all 0.25s;}
        .theme-toggle .knob{width:18px; height:18px; border-radius:50%; background:var(--primary); transition:all 0.25s;}
        .theme-toggle.active{justify-content:flex-end; background:rgba(255,255,255,0.06);}
        .theme-toggle.active .knob{background:var(--accent);}
        
        .btn-logout{background:transparent; border:1px solid var(--border); padding:0.4rem 0.8rem; border-radius:8px; cursor:pointer; color:var(--text); font-size:0.9rem; transition:all 0.2s;}
        .btn-logout:hover{background:var(--light-bg); border-color:var(--danger);}
        
        /* Container */
        .container{max-width:1400px; margin:0 auto; padding:1.5rem 1.5rem;}
        
        /* Welcome Section */
        .welcome{background:linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color:white; padding:1.5rem; border-radius:12px; margin-bottom:1.5rem;}
        .welcome h2{font-size:1.5rem; margin-bottom:0.3rem;}
        .welcome p{opacity:0.95; font-size:0.95rem;}
        
        /* Grid Layout */
        .grid{display:grid; gap:1.2rem;}
        .grid-cols-1{grid-template-columns:1fr;}
        .grid-cols-2{grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));}
        .grid-cols-3{grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));}
        .grid-cols-4{grid-template-columns:repeat(auto-fit, minmax(160px, 1fr));}
        
        /* Card */
        .card{background:var(--card-bg); border:1px solid var(--border); border-radius:12px; padding:1.2rem; box-shadow:var(--card-shadow); transition:all 0.3s;}
        .card:hover{box-shadow:0 8px 20px rgba(0,0,0,0.1); transform:translateY(-2px);}
        .card-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:0.8rem;}
        .card-title{font-size:0.95rem; font-weight:600; color:var(--muted-text);}
        .card-value{font-size:2rem; font-weight:700; color:var(--primary); margin:0.5rem 0;}
        .card-subtitle{font-size:0.85rem; color:var(--muted-text);}
        
        /* Status indicators */
        .status-indicator{display:inline-flex; align-items:center; gap:0.4rem; font-size:0.85rem; padding:0.4rem 0.8rem; border-radius:6px; font-weight:500;}
        .status-good{background:rgba(16,185,129,0.15); color:var(--success);}
        .status-warning{background:rgba(245,158,11,0.15); color:var(--warning);}
        .status-danger{background:rgba(239,68,68,0.15); color:var(--danger);}
        .status-dot{width:6px; height:6px; border-radius:50%; display:inline-block;}
        
        /* Sections */
        h3{font-size:1.2rem; color:var(--heading); margin:1.5rem 0 0.8rem; font-weight:700; display:flex; align-items:center; gap:0.6rem;}
        h3::before{content:''; width:4px; height:24px; background:var(--primary); border-radius:2px;}
        
        /* Chart */
        .chart-container{background:var(--card-bg); border:1px solid var(--border); border-radius:12px; padding:1.2rem; margin-bottom:1.2rem;}
        
        /* Sensor Grid */
        .sensor-grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(140px, 1fr)); gap:0.8rem;}
        .sensor-card{background:var(--light-bg); border:1px solid var(--border); border-radius:10px; padding:0.9rem; text-align:center;}
        .sensor-name{font-size:0.8rem; color:var(--muted-text); margin-bottom:0.3rem;}
        .sensor-value{font-size:1.4rem; font-weight:700; color:var(--primary);}
        .sensor-unit{font-size:0.75rem; color:var(--muted-text);}
        
        /* Alarm Log */
        .alarm-log{background:var(--card-bg); border:1px solid var(--border); border-radius:12px; padding:1.2rem;}
        .alarm-item{display:flex; gap:0.8rem; padding:0.9rem; border-left:4px solid var(--border); border-radius:6px; margin-bottom:0.8rem; background:var(--light-bg);}
        .alarm-item.critical{border-left-color:var(--danger);}
        .alarm-item.warning{border-left-color:var(--warning);}
        .alarm-item.success{border-left-color:var(--success);}
        .alarm-icon{width:32px; height:32px; display:flex; align-items:center; justify-content:center; border-radius:50%; font-size:1rem; flex-shrink:0;}
        .alarm-item.critical .alarm-icon{background:rgba(239,68,68,0.2); color:var(--danger);}
        .alarm-item.warning .alarm-icon{background:rgba(245,158,11,0.2); color:var(--warning);}
        .alarm-item.success .alarm-icon{background:rgba(16,185,129,0.2); color:var(--success);}
        .alarm-content{flex:1;}
        .alarm-title{font-weight:600; font-size:0.95rem; color:var(--heading); margin-bottom:0.2rem;}
        .alarm-reason{font-size:0.85rem; color:var(--muted-text); margin-bottom:0.3rem;}
        .alarm-action{font-size:0.8rem; background:rgba(16,185,129,0.1); color:var(--primary); padding:0.35rem 0.6rem; border-radius:4px; display:inline-block;}
        .alarm-time{font-size:0.75rem; color:var(--muted-text);}
        
        /* Scenario */
        .scenario-card{background:var(--light-bg); border:1px solid var(--border); border-radius:10px; padding:1rem; margin-bottom:0.8rem;}
        .scenario-title{font-weight:600; color:var(--heading); margin-bottom:0.3rem;}
        .scenario-desc{font-size:0.9rem; color:var(--muted-text); margin-bottom:0.4rem;}
        .scenario-result{font-size:0.9rem; color:var(--primary); font-weight:600;}
        
        /* Tables */
        table{width:100%; border-collapse:collapse; font-size:0.9rem;}
        th{background:var(--light-bg); padding:0.7rem; text-align:left; font-weight:600; color:var(--heading); border-bottom:1px solid var(--border);}
        td{padding:0.7rem; border-bottom:1px solid var(--border);}
        tr:hover{background:var(--light-bg);}
        
        /* Buttons */
        .btn-report{background:var(--primary); color:white; border:none; padding:0.5rem 1rem; border-radius:8px; cursor:pointer; font-size:0.9rem; transition:all 0.2s;}
        .btn-report:hover{opacity:0.85;}
        .btn-report.secondary{background:transparent; border:1px solid var(--border); color:var(--text);}
        .btn-report.secondary:hover{background:var(--light-bg);}
        
        /* Progress */
        .progress{height:8px; background:var(--border); border-radius:4px; overflow:hidden; margin-top:0.4rem;}
        .progress-bar{height:100%; background:linear-gradient(90deg, var(--primary), var(--secondary)); border-radius:4px; transition:width 0.3s;}
        
        .report-actions{display:flex; gap:0.6rem; flex-wrap:wrap; margin-top:0.8rem;}
        
        /* Responsive */
        @media(max-width:768px){
            .header{flex-direction:column; align-items:flex-start; gap:1rem; padding:1rem;}
            .grid-cols-2, .grid-cols-3, .grid-cols-4{grid-template-columns:1fr;}
            .card-value{font-size:1.5rem;}
            .alarm-item{flex-direction:column;}
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="brand">
            <img src="EcoPilotLogo.png" alt="logo">
            <span>EcoPilot Dashboard</span>
        </div>
        <div class="header-actions">
            <span class="badge live">üî¥ Live</span>
            <button id="theme-toggle-dash" class="theme-toggle" title="Theme wechseln"><span class="knob"></span></button>
            <button id="logout" class="btn-logout">Abmelden</button>
        </div>
    </div>

    <div class="container">
        <!-- Welcome -->
        <div class="welcome">
            <h2>Willkommen zur√ºck, <span id="username-display">Nutzer</span>! üëã</h2>
            <p>Echtzeit-Energieoptimierung, KI-gesteuerte Anomalieerkennung & automatisierte Berichterstattung</p>
        </div>

        <!-- KPI Cards -->
        <h3>Leistungsindikatoren (KPIs)</h3>
        <div class="grid grid-cols-4">
            <div class="card">
                <div class="card-title">Gesch√§tzte Einsparung</div>
                <div class="card-value">12%</div>
                <div class="card-subtitle">Diese Woche</div>
                <div class="status-indicator status-good" style="margin-top:0.5rem;">
                    <span class="status-dot" style="background:var(--success);"></span> Zielwert: 10-20%
                </div>
            </div>
            <div class="card">
                <div class="card-title">CO‚ÇÇ-Reduktion</div>
                <div class="card-value">8,4t</div>
                <div class="card-subtitle">Monatlich √§quivalent</div>
                <div class="status-indicator status-good" style="margin-top:0.5rem;">
                    <span class="status-dot" style="background:var(--success);"></span> ESG-konform
                </div>
            </div>
            <div class="card">
                <div class="card-title">Verf√ºgbarkeit</div>
                <div class="card-value">99.2%</div>
                <div class="card-subtitle">System-Status</div>
                <div class="status-indicator status-good" style="margin-top:0.5rem;">
                    <span class="status-dot" style="background:var(--success);"></span> Zielwert: 99%
                </div>
            </div>
            <div class="card">
                <div class="card-title">ROI (Pro)</div>
                <div class="card-value">8 Mo</div>
                <div class="card-subtitle">Amortisation</div>
                <div class="status-indicator status-good" style="margin-top:0.5rem;">
                    <span class="status-dot" style="background:var(--success);"></span> Zielwert: &lt; 12 Mo
                </div>
            </div>
        </div>

        <!-- Live Sensor Data -->
        <h3>Live-Sensorenwerte (Echtzeit)</h3>
        <div class="chart-container">
            <p style="font-size:0.9rem; color:var(--muted-text); margin-bottom:0.8rem;">Aktuelle Sensormesswerte der Produktionshalle:</p>
            <div class="sensor-grid">
                <div class="sensor-card">
                    <div class="sensor-name">Stromverbrauch</div>
                    <div class="sensor-value">187</div>
                    <div class="sensor-unit">kW (normal)</div>
                </div>
                <div class="sensor-card">
                    <div class="sensor-name">Druckluft</div>
                    <div class="sensor-value">6.2</div>
                    <div class="sensor-unit">bar (nominal)</div>
                </div>
                <div class="sensor-card">
                    <div class="sensor-name">Temperatur HVAC</div>
                    <div class="sensor-value">21.8¬∞C</div>
                    <div class="sensor-unit">optimal</div>
                </div>
                <div class="sensor-card">
                    <div class="sensor-name">Leckage-Indikator</div>
                    <div class="sensor-value">0</div>
                    <div class="sensor-unit">Anomalien erkannt</div>
                </div>
            </div>
        </div>

        <!-- W√∂chentlicher Verbrauch -->
        <h3>W√∂chentlicher Energieverbrauch & Prognose</h3>
        <div class="chart-container">
            <table>
                <thead>
                    <tr>
                        <th>Tag</th>
                        <th>Verbrauch (kWh)</th>
                        <th>CO‚ÇÇ-√Ñquivalent (kg)</th>
                        <th>Einsparung vs. Vorwoche</th>
                        <th>Prognose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Mo</strong></td>
                        <td>1.200</td>
                        <td>528</td>
                        <td><span class="status-indicator status-good">‚Üì 8%</span></td>
                        <td>Optimal</td>
                    </tr>
                    <tr>
                        <td><strong>Di</strong></td>
                        <td>1.050</td>
                        <td>462</td>
                        <td><span class="status-indicator status-good">‚Üì 12%</span></td>
                        <td>Optimal</td>
                    </tr>
                    <tr>
                        <td><strong>Mi</strong></td>
                        <td>1.160</td>
                        <td>510</td>
                        <td><span class="status-indicator status-good">‚Üì 10%</span></td>
                        <td>Optimal</td>
                    </tr>
                    <tr>
                        <td><strong>Do</strong></td>
                        <td>1.300</td>
                        <td>572</td>
                        <td><span class="status-indicator status-warning">‚Üë 2%</span></td>
                        <td>Warnung: Pr√ºfen Sie Auslastung</td>
                    </tr>
                    <tr>
                        <td><strong>Fr</strong></td>
                        <td>1.420</td>
                        <td>625</td>
                        <td><span class="status-indicator status-warning">‚Üë 5%</span></td>
                        <td>Warnung: Nachtl√§ufer erkannt</td>
                    </tr>
                    <tr>
                        <td><strong>Sa</strong></td>
                        <td>980</td>
                        <td>432</td>
                        <td><span class="status-indicator status-good">‚Üì 15%</span></td>
                        <td>Optimal</td>
                    </tr>
                    <tr>
                        <td><strong>So</strong></td>
                        <td>870</td>
                        <td>383</td>
                        <td><span class="status-indicator status-good">‚Üì 18%</span></td>
                        <td>Optimal</td>
                    </tr>
                </tbody>
            </table>
            <p style="font-size:0.85rem; color:var(--muted-text); margin-top:0.8rem;">üìä Durchschnittlicher Wochenverbrauch: 8.980 kWh | CO‚ÇÇ gesamt: 3.950 kg (‚âà 30 km Autofahrt ersparen)</p>
        </div>

        <!-- Anomalien & Leckage -->
        <h3>üö® Alarm-Plan & KI-Diagnosen</h3>
        <div class="alarm-log">
            <p style="font-size:0.9rem; color:var(--muted-text); margin-bottom:1rem;">Erkannte Anomalien, Warnungen & KI-gest√ºtzte Empfehlungen:</p>
            
            <!-- Critical Alarm -->
            <div class="alarm-item critical">
                <div class="alarm-icon">‚ö†Ô∏è</div>
                <div class="alarm-content">
                    <div class="alarm-title">Druckluft-Leckage detektiert</div>
                    <div class="alarm-reason"><strong>Grund:</strong> Abnormaler Druckabfall im System um 04:15 Uhr erkannt (von 6.8 auf 5.9 bar in 8 Min)</div>
                    <div style="margin-top:0.4rem;">
                        <strong>ü§ñ KI-Analyse & Vorschlag:</strong>
                        <div style="margin-top:0.3rem; padding:0.6rem; background:rgba(239,68,68,0.1); border-radius:6px; border-left:3px solid var(--danger);">
                            ‚Ä¢ <strong>Leckage-Ort:</strong> Wahrscheinlich im Bereich Fertigungslinie 2-3 (Druckabfall konzentriert sich dort)<br>
                            ‚Ä¢ <strong>Gesch√§tzter Verlust:</strong> 22 L/min = ~3.180 ‚Ç¨ / Monat Energieverschwendung<br>
                            ‚Ä¢ <strong>Empfehlung:</strong> Sofortma√ünahme: Techniker zur Sichtpr√ºfung schicken. Estimated ROI der Reparatur: < 2 Tage<br>
                            ‚Ä¢ <strong>Automatische Aktion:</strong> System hat Druckluft-Kompressor auf Standby gesetzt; aktiviert Leck-Benachrichtigung an Wartungsteam
                        </div>
                    </div>
                    <div class="alarm-action" style="margin-top:0.5rem;">üîß Wartungsticket erstellt #WRK-2025-114</div>
                    <div class="alarm-time">Erkannt: 04:15 Uhr | Schweregrad: KRITISCH</div>
                </div>
            </div>

            <!-- Warning Alarm -->
            <div class="alarm-item warning">
                <div class="alarm-icon">‚ö°</div>
                <div class="alarm-content">
                    <div class="alarm-title">HVAC-Komfortverletzung & ineffiziente K√ºhlung</div>
                    <div class="alarm-reason"><strong>Grund:</strong> Freitag 16:00‚Äì18:00 Uhr: Temperaturregelung zeigte √úberk√ºhlungsphasen (20.1¬∞C statt 21‚Äì22¬∞C Sollwert)</div>
                    <div style="margin-top:0.4rem;">
                        <strong>ü§ñ KI-Analyse & Vorschlag:</strong>
                        <div style="margin-top:0.3rem; padding:0.6rem; background:rgba(245,158,11,0.1); border-radius:6px; border-left:3px solid var(--warning);">
                            ‚Ä¢ <strong>Ursache:</strong> Zu aggressive K√ºhlkaskade in Spitzenlastphase; Sollwert-Schwelle zu eng kalibriert<br>
                            ‚Ä¢ <strong>Energieverschwendung:</strong> ca. 45 kWh unn√∂tiger K√ºhlbetrieb (~12 ‚Ç¨)<br>
                            ‚Ä¢ <strong>Empfehlung:</strong> K√ºhlkaskade-Parameter anpassen: erh√∂hen Sie Hysterese von 0.5¬∞C auf 1.0¬∞C ‚Üí reduziert Schaltzyklen<br>
                            ‚Ä¢ <strong>Was-w√§re-wenn-Szenario:</strong> Mit neuer Kalibrierung k√∂nnten Sie ~80 kWh/Woche K√ºhlenergie sparen = 720 ‚Ç¨/Jahr<br>
                            ‚Ä¢ <strong>Automatische Aktion:</strong> Empfehlung in Wartungsplan eingeplant
                        </div>
                    </div>
                    <div class="alarm-action" style="margin-top:0.5rem;">‚úì Zur Wartung eingeplant: Montag 10:00 Uhr</div>
                    <div class="alarm-time">Erkannt: Freitag 18:30 | Schweregrad: WARNUNG</div>
                </div>
            </div>

            <!-- Success / Optimization -->
            <div class="alarm-item success">
                <div class="alarm-icon">‚úÖ</div>
                <div class="alarm-content">
                    <div class="alarm-title">Automatische Optimierung erfolgreich</div>
                    <div class="alarm-reason"><strong>Grund:</strong> Belegungssensor erkannte fr√ºhen Wochenstart; System hat Vork√ºhlung optimiert</div>
                    <div style="margin-top:0.4rem;">
                        <strong>ü§ñ KI-Analyse & Vorschlag:</strong>
                        <div style="margin-top:0.3rem; padding:0.6rem; background:rgba(16,185,129,0.1); border-radius:6px; border-left:3px solid var(--success);">
                            ‚Ä¢ <strong>Automatische Steuerung:</strong> HVAC-Pr√§k√ºhlung um 05:30 Uhr statt 06:00 Uhr initiiert (optimale Komfortkurve)<br>
                            ‚Ä¢ <strong>Resultat:</strong> Stromspitze um 06:00 Uhr vermieden (Tarifoptimierung) = 18 ‚Ç¨ Einsparung<br>
                            ‚Ä¢ <strong>Einsparung diese Woche:</strong> +2,3 % durch intelligente Lastverschiebung<br>
                            ‚Ä¢ <strong>Aktion:</strong> Muster erkannt & in t√§gliche Routine √ºbernommen
                        </div>
                    </div>
                    <div class="alarm-action" style="margin-top:0.5rem;">üìä In Standardprozedur √ºbernommen</div>
                    <div class="alarm-time">Erkannt: Montag 05:45 | Schweregrad: INFO</div>
                </div>
            </div>

            <!-- Compliance Alert -->
            <div class="alarm-item success">
                <div class="alarm-icon">üìã</div>
                <div class="alarm-content">
                    <div class="alarm-title">ESG-Bericht: CO‚ÇÇ-Zielwert erreicht</div>
                    <div class="alarm-reason"><strong>Grund:</strong> Monatliches Reporting: Emissions-Schwellwert wurde unterschritten</div>
                    <div style="margin-top:0.4rem;">
                        <strong>ü§ñ KI-Analyse & Vorschlag:</strong>
                        <div style="margin-top:0.3rem; padding:0.6rem; background:rgba(16,185,129,0.1); border-radius:6px; border-left:3px solid var(--success);">
                            ‚Ä¢ <strong>Monatlicher CO‚ÇÇ-Aussto√ü:</strong> 14,8 t (Zielwert: &lt; 18 t) ‚úÖ<br>
                            ‚Ä¢ <strong>Reduktion vs. Vorjahr:</strong> 28% weniger Emissionen<br>
                            ‚Ä¢ <strong>ESG-Konformit√§t:</strong> Vollst√§ndig. Automatischer Report f√ºr Compliance bereit<br>
                            ‚Ä¢ <strong>N√§chster Meilenstein:</strong> 15 t CO‚ÇÇ-√Ñquivalent (auf Kurs f√ºr Jan 2026)
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="btn-report">üì• CO‚ÇÇ-Report exportieren</button>
                        <button class="btn-report secondary">üìß An Compliance senden</button>
                    </div>
                    <div class="alarm-time">Bericht: Diese Woche | Status: ERFOLGREICH</div>
                </div>
            </div>
        </div>

        <!-- What-if Scenarios -->
        <h3>üí° Was-w√§re-wenn Szenarien (KI-Modellierungen)</h3>
        <div class="grid grid-cols-2">
            <div class="scenario-card">
                <div class="scenario-title">Szenario A: Zus√§tzlicher Ventilator f√ºr HVAC</div>
                <div class="scenario-desc">Wenn Sie einen zweiten Ventilator in Halle 2 installieren ‚Üí Verbesserte Luftzirkulation & konstante 21¬∞C</div>
                <div class="progress">
                    <div class="progress-bar" style="width:65%;"></div>
                </div>
                <div class="scenario-result">Einsparung: +3,2% | Investition: 2.400‚Ç¨ | ROI: 8,5 Monate ‚úÖ</div>
            </div>
            <div class="scenario-card">
                <div class="scenario-title">Szenario B: LED-Upgrade (Beleuchtung)</div>
                <div class="scenario-desc">Wenn Sie die Halogenbeleuchtung durch LED ersetzen ‚Üí 70% weniger W√§rmeeintrag & Stromverbrauch</div>
                <div class="progress">
                    <div class="progress-bar" style="width:45%;"></div>
                </div>
                <div class="scenario-result">Einsparung: +5,8% | Investition: 8.900‚Ç¨ | ROI: 14,2 Monate ‚úÖ</div>
            </div>
            <div class="scenario-card">
                <div class="scenario-title">Szenario C: Druckluft-Leckagen beheben</div>
                <div class="scenario-desc">Wenn Sie alle erkannten Leckagen sofort reparieren ‚Üí System l√§uft auf Nennleistung</div>
                <div class="progress">
                    <div class="progress-bar" style="width:82%;"></div>
                </div>
                <div class="scenario-result">Einsparung: +8,5% | Investition: 650‚Ç¨ | ROI: 2 Wochen ‚≠ê SEHR HOCH</div>
            </div>
            <div class="scenario-card">
                <div class="scenario-title">Szenario D: Automatische Lastverschiebung</div>
                <div class="scenario-desc">Wenn Sie Spitzenlastzeiten auf g√ºnstigere Tarifzonen verschieben ‚Üí Tarifoptimierung 24/7</div>
                <div class="progress">
                    <div class="progress-bar" style="width:35%;"></div>
                </div>
                <div class="scenario-result">Einsparung: +2,1% | Investition: 0‚Ç¨ (Software) | ROI: Sofort ‚úÖ</div>
            </div>
        </div>

        <!-- Automatic Reports -->
        <h3>üìä Automatische Berichte & Exports</h3>
        <div class="card">
            <p style="margin-bottom:1rem;">EcoPilot generiert automatische Berichte f√ºr verschiedene Stakeholder:</p>
            <table>
                <thead>
                    <tr>
                        <th>Bericht-Typ</th>
                        <th>H√§ufigkeit</th>
                        <th>Empf√§nger</th>
                        <th>Inhalt</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Energie-Dashboard</strong></td>
                        <td>T√§glich 06:00 Uhr</td>
                        <td>Betriebsleiter</td>
                        <td>Live-Werte, Alarme, Anomalien, KI-Vorschl√§ge</td>
                        <td><span class="status-indicator status-good">‚úì Gesendet</span></td>
                    </tr>
                    <tr>
                        <td><strong>CO‚ÇÇ-Reporting</strong></td>
                        <td>W√∂chentlich Fr 18:00</td>
                        <td>ESG-Manager</td>
                        <td>CO‚ÇÇ-Aussto√ü, Reduktionsziele, Compliance-Status</td>
                        <td><span class="status-indicator status-good">‚úì Gesendet</span></td>
                    </tr>
                    <tr>
                        <td><strong>Wartungs-Alerts</strong></td>
                        <td>Bei Bedarf (Ad-hoc)</td>
                        <td>Technisches Team</td>
                        <td>Anomalien, geplante Wartung, Leckage-Reports</td>
                        <td><span class="status-indicator status-warning">‚è≥ Ausstehend</span></td>
                    </tr>
                    <tr>
                        <td><strong>Finanzielle Analyse</strong></td>
                        <td>Monatlich 1. des Monats</td>
                        <td>CFO / Controller</td>
                        <td>ROI, Kostenreduktion, Amortisationen, Prognosen</td>
                        <td><span class="status-indicator status-good">‚úì Gesendet</span></td>
                    </tr>
                </tbody>
            </table>
            <div class="report-actions">
                <button class="btn-report">üì• Alle Berichte exportieren (PDF/CSV)</button>
                <button class="btn-report secondary">üîî Report-Einstellungen anpassen</button>
                <button class="btn-report secondary">üìß Testbericht an Email senden</button>
            </div>
        </div>

        <!-- ROI / Financial Summary -->
        <h3>üí∞ Finanzielle Zusammenfassung & ROI-Berechnung</h3>
        <div class="grid grid-cols-2">
            <div class="card">
                <div class="card-title">Monatliche Einsparungen</div>
                <div class="card-value">3.420 ‚Ç¨</div>
                <div style="font-size:0.85rem; color:var(--muted-text); margin-top:0.5rem;">
                    <strong>Berechnung:</strong>
                    <ul style="margin-top:0.3rem; margin-left:1rem;">
                        <li>Stromersparnis (12%): 2.840 ‚Ç¨</li>
                        <li>Druckluft-Optimierung: 580 ‚Ç¨</li>
                    </ul>
                </div>
            </div>
            <div class="card">
                <div class="card-title">Gesch√§tzter Jahres-ROI</div>
                <div class="card-value">41.040 ‚Ç¨</div>
                <div style="font-size:0.85rem; color:var(--muted-text); margin-top:0.5rem;">
                    <strong>Amortisationszeit:</strong>
                    <div style="margin-top:0.3rem;">
                        ‚Ä¢ Basic-Kit: 790 ‚Ç¨ ‚Üí 0,3 Monate<br>
                        ‚Ä¢ Pro-Kit: 790 ‚Ç¨ + Setup 490 ‚Ç¨ = 1.280 ‚Ç¨ ‚Üí 0,46 Monate<br>
                        ‚Ä¢ Gesamtsystem: ~9 Monate (inkl. Installation)
                    </div>
                </div>
            </div>
        </div>

        <!-- Multi-Site Overview -->
        <h3>üè≠ Multi-Site Management</h3>
        <div class="card">
            <table>
                <thead>
                    <tr>
                        <th>Standort</th>
                        <th>Sensoren</th>
                        <th>Einsparung</th>
                        <th>Status</th>
                        <th>Offene Alarme</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Halle 1 (K√∂ln)</strong></td>
                        <td>15 Sensoren</td>
                        <td>14%</td>
                        <td><span class="status-indicator status-good">‚úì Aktiv</span></td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td><strong>Halle 2 (K√∂ln)</strong></td>
                        <td>12 Sensoren</td>
                        <td>10%</td>
                        <td><span class="status-indicator status-good">‚úì Aktiv</span></td>
                        <td>2 (Leckage, HVAC)</td>
                    </tr>
                    <tr>
                        <td><strong>Logistik-Center (D√ºsseldorf)</strong></td>
                        <td>8 Sensoren</td>
                        <td>11%</td>
                        <td><span class="status-indicator status-good">‚úì Aktiv</span></td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Footer -->
        <div style="padding:1.5rem 0; text-align:center; color:var(--muted-text); font-size:0.85rem; border-top:1px solid var(--border); margin-top:2rem;">
            <p>¬© 2025 EcoPilot GmbH | Intelligente Energieoptimierung mit KI und IoT | Dashboard aktualisiert: Live</p>
            <p style="margin-top:0.5rem;">N√§chstes automatisches Backup: 20:00 Uhr heute | N√§chste Report-Generierung: Morgen 06:00 Uhr</p>
        </div>
    </div>

    <script>
        // Protect page
        if (sessionStorage.getItem('loggedIn') !== 'true') window.location.href = 'index.html';

        // Welcome
        (function(){
            const name = sessionStorage.getItem('username') || 'Nutzer';
            const el = document.getElementById('username-display');
            if(el) el.textContent = name;
        })();

        // Logout
        document.getElementById('logout').addEventListener('click', function(){
            sessionStorage.removeItem('loggedIn');
            sessionStorage.removeItem('username');
            window.location.href = 'index.html';
        });

        // Theme
        (function(){
            const toggle = document.getElementById('theme-toggle-dash');
            const root = document.documentElement;
            const stored = localStorage.getItem('theme');
            function applyTheme(t){
                if(t==='dark'){ root.setAttribute('data-theme','dark'); toggle.classList.add('active'); } 
                else { root.removeAttribute('data-theme'); toggle.classList.remove('active'); }
            }
            if (stored) applyTheme(stored); 
            else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) applyTheme('dark');
            if (toggle) toggle.addEventListener('click', function(){ 
                const current = document.documentElement.getAttribute('data-theme')==='dark' ? 'dark' : 'light'; 
                const next = current==='dark' ? 'light' : 'dark'; 
                applyTheme(next); 
                localStorage.setItem('theme', next); 
            });
            if (window.matchMedia) window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => { 
                const stored = localStorage.getItem('theme'); 
                if(!stored) applyTheme(e.matches ? 'dark' : 'light'); 
            });
        })();

        // Report buttons
        document.querySelectorAll('button.btn-report').forEach(btn => {
            btn.addEventListener('click', function(e){
                e.preventDefault();
                alert('üîß Demo: Bericht-Funktion. In einer echten Anwendung w√ºrde hier der Report heruntergeladen oder versendet.');
            });
        });
    </script>
</body>
</html>